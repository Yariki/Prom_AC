Протокол.

1. Старт пакета обозначается двумя байтами AB(171) CD(205).
2. Окончание пакета обозначается байтами DC(220) BA(186).
3. Процедура читает данные с порта и сравнивает значение с выше описаными значениями.
4. Если отыскали начало пакета, тогда начинаем запись в промежуточный буфер всех последующих данных. В данном случае мы должны не пропустить конец пакета.
5. При нахождении конца пакета. Мы прекращаем читать данные и передаем промежуточный буфер парсеру.
6. Парсер определяет команду и параметры.
 Формат данных входящих данных для контроллера:	
 +----+----+-------+-------+-------+--
 | CC | SS | ID:AL | ID:AL | ID:AL |.....
 +----+----+-------+-------+-------+-- 
 CC - команда. Длинна - 1 байт.
 SS - размер данных - 1 байт.
 ID - идентификатор объекта (задвижка, транспортер и т.д.) - 1 байт
 AL - идентификатор сигнала/алерта который нужно проверить  - 1 байт
Формат данных исходящих данных для контроллера:	
 +----+----+-------+-------+-------+--
 | CC | SS | ID:VV | ID:VV | ID:VV |.....
 +----+----+-------+-------+-------+-- 
 CC - команда. Длинна - 1 байт.
 SS - размер данных - 1 байт.
 ID - идентификатор обекта (задвижка, транспортер и т.д.) - 1 байт
 VV - значение для сигнала/алерта - 1 байт

Команды:
00(240) - стар для объекта
FE 254) - остановка объекта
FF(255) - экстренная остановка объекта
CE(206) - проверка значений сигналов/алертов для объектов

 


 